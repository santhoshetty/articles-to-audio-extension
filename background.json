// background.js

chrome.runtime.onInstalled.addListener(() => {
    console.log("Audio Summaries extension installed");
});
  
  /**
   * Listen for messages from popup.js or contentScript.js
   * We'll store or retrieve articles from chrome.storage
   */
  chrome.runtime.onMessage.addListener(async (request, sender, sendResponse) => {
    if (request.action === "SAVE_ARTICLE") {
        // Save the article text and title to chrome.storage
      const { title, text
        } = request.payload;
  
      // Read current articles
      let { articles
        } = await chrome.storage.local.get([
            "articles"
        ]);
      if (!articles) articles = [];
  
      // Push the new article
      articles.push({ title, text, date: new Date().toISOString()
        });
  
      // Save back
      await chrome.storage.local.set({ articles
        });
      sendResponse({ success: true, message: "Article stored."
        });
      return true; // indicate we'll respond asynchronously
    }
});
  